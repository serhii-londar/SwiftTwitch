![](https://github.com/Chris-Perkins/SwiftTwitch/raw/master/Readme_Imgs/SwiftTwitch.jpg)

[![Version](https://img.shields.io/cocoapods/v/SwiftTwitch.svg?style=flat)](https://cocoapods.org/pods/SwiftTwitch)
[![License](https://img.shields.io/cocoapods/l/SwiftTwitch.svg?style=flat)](https://cocoapods.org/pods/SwiftTwitch)
[![Platform](https://img.shields.io/cocoapods/p/SwiftTwitch.svg?style=flat)](https://cocoapods.org/pods/SwiftTwitch)
[![Discord](https://img.shields.io/discord/325552783787032576.svg?label=support)](https://discord.gg/3vj5SnY)

**THIS IS AN UNOFFICIAL, FAN-MADE WRAPPER. IT IS IN NO WAY ENDORSED BY TWITCH.TV**

## What is It?

Swift Twitch is a library intended for client-facing applications interaction with the New Twitch API, Helix. This library aims to ease API interaction by returning typed data values to help you finish your application without headaches.
For example, after a non-empty `Get Videos` call, you can do the following:

```Swift
let firstVideoData: VideoData = getVideosData.videoData.first!
let title: String = firstVideoData.title
let viewCount: Int = firstVideoData.viewCount
```

‚ù§Ô∏è Pull requests are very welcome ‚ù§Ô∏è

## Available API Calls

You can run the following API calls:

| API Method | Swift Function |  
|:-:|:-:|  
Get Extension Analytics | `Twitch.Analytics.getExtensionAnalytics`
Get Game Analytics | `Twitch.Analytics.getGameAnalytics`
Get Bits Leaderboard | `Twitch.Bits.getBitsLeaderboard`
Create Clip | `Twitch.Clips.createClip`
Get Clips | `Twitch.Clips.getClips`
Get Top Games | `Twitch.Games.getTopGames`
Get Games | `Twitch.Games.getGames`
Get Streams | `Twitch.Streams.getStreams`
Get Streams Metadata | `Twitch.Streams.getStreamsMetadata`
Create Stream Marker | `Twitch.Streams.createStreamMarker`
Get Stream Markers | `Twitch.Streams.getStreamMarkers`
Get Users | `Twitch.Users.getUsers`
Get Users Follows | `Twitch.Users.getUsersFollows`
Update User | `Twitch.Users.updateUser`
Get User Extensions | `Twitch.Users.getUserExtensions`
Get Videos | `Twitch.Videos.getVideos`

### Documentation

[New Twitch API (Helix) Documentation](https://dev.twitch.tv/docs/api/reference/)

[Swift Twitch Documentation](https://htmlpreview.github.io/?https://github.com/Chris-Perkins/SwiftTwitch/blob/master/docs/index.html)

* If the above link is not working, clone this repo and open `docs/index.html`

### Example Usage

<details>  
<summary>How to check if a user is following another user</summary>  

```Swift
import SwiftTwitch

class AwesomeClass {
    func spectacularFunction() {
        TwitchTokenManager.shared.accessToken = "$SomeValidToken"
        TwitchTokenManager.shared.clientID = "$ClientIDForAccessToken"

        let user1Id = "1234"
        let user2Id = "5678"
        Twitch.Users.getUsersFollows(followerId: user1Id, followedId: user2Id) { result in 
            switch result {
            case .success(let getUsersFollowsData):
                /* If the total = 1, we know that user1 is following user2 
                   as it is documented in the Twitch API docs. */
                if getUsersFollowsData.total == 1 {
                    print("User \(user1Id) is following user \(user2Id)!")
                } else {
                    print("User \(user1Id) is not following user \(user2Id)")
                }
            case .failure(let data, let response, let error):
                print("The API call failed! Unable to determine relationship.")
            }
        }
    }
}

```
</details>

## Get Started

### I don't have an access token!

In order to use this library, you must first have an application register on the Twitch Developer portal. You can register your application quickly [on Twitch's official application creation dashboard](https://glass.twitch.tv/console/apps/create). After this step, there are two methods to retrieving API keys.

#### Manually Retrieve Access Token

[To manually retrieve an access token, please utilize this guide by Twitch.](https://dev.twitch.tv/docs/authentication/getting-tokens-oauth/#oauth-implicit-code-flow)

#### Automatically Retrieve Access Token

If you need an access token generated by the user, you have a few options:

1. Create a custom OAuth token retriever. This can be done using Web Views to the OAuth token portal.  
1. Use a library to do it for you! There's a few OAuth libraries out there.
    1. [OAuthSwift](https://github.com/OAuthSwift/OAuthSwift)
    1. [OAuth2](https://github.com/p2/OAuth2)

### I have my access token, now what?

Now that you have an access token, you can provide it to the application in the following manner:

```Swift
TwitchTokenManager.shared.accessToken = "$Your_Token"
TwitchTokenManager.shared.clientID = "$Client_ID_Used_To_Get_Token"
```

Once this command is run, all of your API calls are now automatically authenticated! Now go make some API calls. :)

### I want to embed a Twitch Stream/Clip/Video in my app!

I made a separate library for that! Please see [TwitchPlayer](https://github.com/Chris-Perkins/TwitchPlayer)!

### I still have questions!

For Twitch Swift support, feel free to open up an issue or email me at `chris@chrisperkins.me`. For API-based support, please visit [The Twitch Developer Forums](https://discuss.dev.twitch.tv/)

## Installation

1. Install [CocoaPods](https://cocoapods.org)
1. Add this repo to your `Podfile`

	```ruby
	target 'Example' do
		# IMPORTANT: Make sure use_frameworks! is included at the top of the file
		use_frameworks!

		pod 'SwiftTwitch'
	end
	```
1. Run `pod install` in the podfile directory from your terminal
1. Open up the `.xcworkspace` that CocoaPods created
1. Done!

## Example Project

![](https://github.com/Chris-Perkins/SwiftTwitch/raw/master/Readme_Imgs/ExampleProject)

To run the example project, clone the repo, and run `pod install` from the Example directory. After that, open the resulting `.xcworkspace` file and go nuts!

The example project is a simple Videos browser for a pre-selected user on Twitch. To run the example project properly, you will need an access token. Set this access token in `TwitchVideosTableViewController`'s `viewDidLoad` method. 

## Contributing

Thank you so much for wanting to contribute! There are a couple of things you can do if you want to help out the project.

<details>
<summary>Layout of helpful contributions</summary>

- Helper functions for verbosity

	Examples: 
	* `getUserWithIDFollowers(_ userId: String)` to get the users that are following the user
	* `getUserWithIDFollowings(_ userId: String)` to get the users that are being followed by the user  
	
	Both of these functions are just wrapped around my pre-existing `getUsersFollows` method, but they make the code that uses them more explicit.
- Additional Documentation
	* Some documentation regarding the Helix API in this library is lacking. It would be awesome to have someone go back and double-check the functions as they use the library.
- Missing functions
	* Currently, we're missing the following Twitch API functions:
		* [Get User Active Extensions](https://dev.twitch.tv/docs/api/reference/#get-user-active-extensions)
		* [Update User Active Extensions](https://dev.twitch.tv/docs/api/reference/#update-user-extensions)

		I was actually unsure how to implement these nicely due to their weird way of indexing. If you know what to do, you would be an amazing help.

- Anything you think would be nice! I'll most likely agree with the user (you). üòä

</details>

## License

SwiftTwitch is available under the MIT license. See the LICENSE file for more info.
